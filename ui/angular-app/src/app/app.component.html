<div class="container">
    <h1>AstroKiddo: Teacher Deck Builder</h1>
    <div class="sub">Generate a 5-slide mini-lesson from NASA media and export to HTML/PDF.</div>

    <div class="panel">
        <div class="row">
            <form *ngIf="form" [formGroup]="form">
                <input placeholder="Topic" type="text" formControlName="topic">
                <input placeholder="Grade (e.g., 6-8)" type="text" formControlName="gradeLevel">
                <select type="text" formControlName="locale">
                    <option value="en">English</option>
                </select>
            </form>
            <button (click)="generate()" [disabled]="loading">{{ loading ? 'Generating...' : 'Generate' }}</button>
        </div>
        <div *ngIf="error" class="warn">{{ error }}</div>
    </div>

    <div *ngIf="deck">
        <div class="panel row">
            <a class="btn" (click)="exportHtml()">⬇ Export HTML</a>
            <a class="btn" (click)="exportPdf()">⬇ Export PDF</a>
            <div class="sub">Deck ID: {{ deck.id }}</div>
        </div>

        <div class="cards">
            <div class="card" *ngFor="let s of deck.slides">
                <div class="badge">{{ s.type }}</div>
                <h3>{{ s.title }}</h3>
                <img *ngIf="s.imageUrl" [src]="s.imageUrl" alt="">
                <p>{{ s.text }}</p>
                <div class="badge" *ngIf="s.attribution">© {{ s.attribution }}</div>
            </div>
        </div>
    </div>
</div>
